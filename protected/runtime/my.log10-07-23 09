2023/07/10 09:01:54 [error] [php] Array to string conversion (/Applications/XAMPP/xamppfiles/htdocs/efisiensi/protected/views/ticketing/manifest/index.php:34)
Stack trace:
#0 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/yii/framework/web/CController.php(872): ManifestController->renderFile()
#1 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/yii/framework/web/CController.php(785): ManifestController->renderPartial()
#2 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/protected/controllers/ticketing/ManifestController.php(63): ManifestController->render()
#3 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/yii/framework/web/actions/CInlineAction.php(49): ManifestController->actionIndex()
#4 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/yii/framework/web/CController.php(308): CInlineAction->runWithParams()
#5 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/yii/framework/web/CController.php(286): ManifestController->runAction()
#6 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/yii/framework/web/CController.php(265): ManifestController->runActionWithFilters()
#7 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/yii/framework/web/CWebApplication.php(282): ManifestController->run()
#8 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/yii/framework/web/CWebApplication.php(141): CWebApplication->runController()
#9 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/yii/framework/base/CApplication.php(185): CWebApplication->processRequest()
#10 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/index.php(27): CWebApplication->run()
REQUEST_URI=/efisiensi/ticketing/manifest/?Manifest%5Bstartdate%5D=2023-07-09&Manifest%5Btrip_id%5D=3
2023/07/10 09:37:41 [error] [system.db.CDbCommand] CDbCommand::fetchAll() gagal: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '.`uang_kembali >= 0 then 1 else 0 end as status_lunas`
FROM `booking_trip_req...' at line 1. Statement SQL yang dijalankan: SELECT `t`.`id`, `t`.`trip_id`, `t`.`route_id`, `t`.`armada_id`, `bt`.`tanggal`, `t`.`jam`, `ta`.`agen_id`, `ta`.`kota_tujuan_name`, `ap`.`nama` AS `agen_nama`, `ta`.`titik_keberangkatan_id`, `ta`.`harga`, `bt`.`kode_booking`, `bt`.`nama_penumpang`, `bt`.`no_telp`, `bt`.`kursi`, `ar`.`jumlah_kursi`, `t`.`group_id`, `case` AS `when bt`.`uang_kembali >= 0 then 1 else 0 end as status_lunas`
FROM `booking_trip_request` `t`
JOIN (select bt.trip_request_id, bt.tanggal, btp.kode_booking, btp.nama_penumpang, btp.no_telp, btp.kursi, bt.uang_kembali from booking_trip bt join (select kode_booking, booking_trip_id, nama_penumpang, no_telp, kursi from booking_trip_penumpang) btp on btp.booking_trip_id=bt.id ) bt ON bt.trip_request_id=t.id
JOIN (select ta.route_id, ta.agen_id, ta.titik_keberangkatan_id, ta.harga, c.name as kota_tujuan_name from trip_agen ta join (select id, name from city) c on c.id=ta.kota_tujuan) ta ON ta.route_id=t.route_id
JOIN (select a.id, a.no_lambung, db.jumlah_kursi from armada a join (select id, jumlah_kursi from denah_bangku_kendaraan) db on db.id=a.denah_bangku) ar ON ar.id=t.armada_id
JOIN (select id, nama from agen_perwakilan) ap ON ap.id=ta.agen_id
WHERE 1=1 AND t.trip_id=:tripId AND bt.tanggal=:tanggal
ORDER BY `ta`.`titik_keberangkatan_id` ASC. Bound with :tripId='3', :tanggal='2023-07-09'.
2023/07/10 09:37:41 [error] [exception.CDbException] CDbException: CDbCommand gagal menjalankan statementSQL: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '.`uang_kembali >= 0 then 1 else 0 end as status_lunas`
FROM `booking_trip_req...' at line 1 in /Applications/XAMPP/xamppfiles/htdocs/efisiensi/yii/framework/db/CDbCommand.php:543
Stack trace:
#0 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/yii/framework/db/CDbCommand.php(396): CDbCommand->queryInternal('fetchAll', Array, Array)
#1 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/protected/models/ticketing/BookingTrip.php(148): CDbCommand->queryAll()
#2 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/protected/controllers/ticketing/ManifestController.php(22): BookingTrip->getDataManifest(Array)
#3 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/yii/framework/web/actions/CInlineAction.php(49): ManifestController->actionIndex()
#4 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/yii/framework/web/CController.php(308): CInlineAction->runWithParams(Array)
#5 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/yii/framework/web/CController.php(286): CController->runAction(Object(CInlineAction))
#6 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/yii/framework/web/CController.php(265): CController->runActionWithFilters(Object(CInlineAction), Array)
#7 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/yii/framework/web/CWebApplication.php(282): CController->run('')
#8 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/yii/framework/web/CWebApplication.php(141): CWebApplication->runController('ticketing/manif...')
#9 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/yii/framework/base/CApplication.php(185): CWebApplication->processRequest()
#10 /Applications/XAMPP/xamppfiles/htdocs/efisiensi/index.php(27): CApplication->run()
#11 {main}
REQUEST_URI=/efisiensi/ticketing/manifest/?Manifest%5Bstartdate%5D=2023-07-09&Manifest%5Btrip_id%5D=3
HTTP_REFERER=http://localhost/efisiensi/ticketing/manifest/
---
